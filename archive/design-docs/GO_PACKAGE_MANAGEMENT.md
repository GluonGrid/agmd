# Go Package Management Cheatsheet
## For Python (uv) and Rust (cargo) Developers

This guide shows how to manage Go dependencies using the same philosophy as `uv` and `cargo`: **never manually edit version files**.

## Core Philosophy

| Principle | Python (uv) | Rust (cargo) | Go |
|-----------|-------------|--------------|-----|
| **Don't edit manually** | ‚ùå Don't edit `pyproject.toml` | ‚ùå Don't edit `Cargo.toml` | ‚ùå Don't edit `go.mod` |
| **Use CLI commands** | ‚úÖ `uv add package` | ‚úÖ `cargo add package` | ‚úÖ `go get package` |
| **Auto-add dependencies** | ‚úÖ Detects imports | ‚úÖ Detects usage | ‚úÖ Detects imports |
| **Clean unused** | ‚úÖ `uv sync` | ‚úÖ `cargo update` | ‚úÖ `go mod tidy` |

## The go.mod File (Like Cargo.toml or pyproject.toml)

**Example `go.mod`:**
```go
module github.com/username/project-name

go 1.21

require (
    github.com/spf13/cobra v1.8.0
    github.com/fatih/color v1.16.0
)

require (
    // Indirect dependencies (transitive)
    github.com/spf13/pflag v1.0.5 // indirect
    golang.org/x/sys v0.14.0 // indirect
)
```

**DO NOT EDIT THIS FILE MANUALLY!** Use `go get` instead.

## Common Tasks

### 1. Initialize a New Project

| Language | Command |
|----------|---------|
| Python | `uv init` |
| Rust | `cargo init` or `cargo new project` |
| **Go** | **`go mod init github.com/username/project`** |

**Example:**
```bash
# Create project directory
mkdir my-project
cd my-project

# Initialize Go module
go mod init github.com/username/my-project

# This creates go.mod file
```

### 2. Add a Dependency

| Language | Command |
|----------|---------|
| Python | `uv add requests` |
| Rust | `cargo add serde` |
| **Go** | **`go get github.com/pkg/errors@latest`** |

**Examples:**
```bash
# Add latest version
go get github.com/spf13/cobra@latest

# Add specific version
go get github.com/spf13/cobra@v1.8.0

# Add multiple packages
go get github.com/spf13/cobra@latest github.com/fatih/color@latest

# Add and update all dependencies
go get -u ./...
```

**What happens:**
1. Package is downloaded to `$GOPATH/pkg/mod/`
2. Entry is added to `go.mod`
3. `go.sum` is updated with checksums

### 3. Remove a Dependency

| Language | Command |
|----------|---------|
| Python | `uv remove requests` |
| Rust | `cargo remove serde` |
| **Go** | **Remove import, then `go mod tidy`** |

**Example:**
```bash
# Step 1: Remove import from your code
# Delete: import "github.com/pkg/errors"

# Step 2: Clean up go.mod
go mod tidy

# This automatically removes unused dependencies
```

### 4. Update Dependencies

| Language | Command |
|----------|---------|
| Python | `uv sync` or `uv lock --upgrade` |
| Rust | `cargo update` |
| **Go** | **`go get -u ./...`** |

**Examples:**
```bash
# Update all dependencies to latest
go get -u ./...

# Update specific package
go get -u github.com/spf13/cobra@latest

# Update specific package to specific version
go get github.com/spf13/cobra@v1.8.1

# Then clean up
go mod tidy
```

### 5. Install Dependencies (After Cloning)

| Language | Command |
|----------|---------|
| Python | `uv sync` |
| Rust | `cargo build` (auto-downloads) |
| **Go** | **`go mod download`** or **`go build`** |

**Example:**
```bash
# Download all dependencies from go.mod
go mod download

# Or just build (downloads automatically)
go build .
```

### 6. Clean/Verify Dependencies

| Language | Command |
|----------|---------|
| Python | `uv sync` |
| Rust | `cargo clean` then `cargo build` |
| **Go** | **`go mod tidy`** |

**Example:**
```bash
# Clean up go.mod and go.sum
# - Removes unused dependencies
# - Adds missing dependencies
go mod tidy

# Verify dependencies match checksums
go mod verify
```

### 7. List Dependencies

| Language | Command |
|----------|---------|
| Python | `uv pip list` |
| Rust | `cargo tree` |
| **Go** | **`go list -m all`** |

**Examples:**
```bash
# List all dependencies
go list -m all

# Show dependency tree
go mod graph

# Show why a package is needed
go mod why github.com/spf13/cobra

# List outdated packages (requires go-mod-outdated)
go list -u -m all
```

### 8. Build Project

| Language | Command |
|----------|---------|
| Python | `uv run python main.py` |
| Rust | `cargo build` or `cargo run` |
| **Go** | **`go build`** or **`go run .`** |

**Examples:**
```bash
# Build binary
go build -o myapp .

# Build and run
go run .

# Build for specific platform
GOOS=linux GOARCH=amd64 go build -o myapp-linux .

# Build optimized (smaller binary)
go build -ldflags="-s -w" -o myapp .
```

## Complete Workflow Example

### Python (uv) Way
```bash
uv init my-project
cd my-project
uv add requests click
uv add --dev pytest
uv run python main.py
```

### Rust (cargo) Way
```bash
cargo new my-project
cd my-project
cargo add serde tokio
cargo add --dev test-case
cargo run
```

### Go Way
```bash
mkdir my-project && cd my-project
go mod init github.com/username/my-project
go get github.com/gin-gonic/gin@latest
go get github.com/stretchr/testify@latest
go run .
# Or build first
go build -o my-project .
./my-project
```

## Important Commands Reference

### Essential Commands (Use Daily)

```bash
# Initialize project
go mod init github.com/username/project

# Add dependency
go get package@latest

# Remove unused & add missing
go mod tidy

# Download dependencies
go mod download

# Build project
go build .

# Run project
go run .
```

### Package Management Commands

```bash
# Add latest version
go get github.com/pkg/name@latest

# Add specific version
go get github.com/pkg/name@v1.2.3

# Add from specific commit
go get github.com/pkg/name@abc1234

# Update all dependencies
go get -u ./...

# Update specific package
go get -u github.com/pkg/name

# Downgrade to specific version
go get github.com/pkg/name@v1.0.0
```

### Maintenance Commands

```bash
# Clean up dependencies
go mod tidy

# Verify dependencies
go mod verify

# Show dependency graph
go mod graph

# List all modules
go list -m all

# Why is package needed?
go mod why github.com/pkg/name

# Download dependencies only
go mod download
```

## Version Constraints

Go uses **minimum version selection** (different from cargo's semver).

```bash
# Latest version
go get package@latest

# Specific version
go get package@v1.2.3

# Version range (requires go.mod edit, but don't!)
# Instead, just use @latest or specific version
```

## Working with Private Repositories

```bash
# Configure Git for private repos
git config --global url."git@github.com:".insteadOf "https://github.com/"

# Tell Go to use Git for private repos
export GOPRIVATE=github.com/yourcompany/*

# Add to ~/.zshrc or ~/.bashrc
echo 'export GOPRIVATE=github.com/yourcompany/*' >> ~/.zshrc
```

## go.sum File (Like Cargo.lock)

The `go.sum` file contains checksums of dependencies.

- **DO commit to version control** (unlike Python's lock files sometimes)
- **DO NOT edit manually**
- Gets updated automatically by `go get` and `go mod tidy`

## Best Practices

### ‚úÖ DO

```bash
# Add dependencies with go get
go get github.com/pkg/errors@latest

# Clean up regularly
go mod tidy

# Commit both go.mod and go.sum
git add go.mod go.sum

# Use specific versions in production
go get github.com/pkg/errors@v0.9.1
```

### ‚ùå DON'T

```bash
# Don't edit go.mod manually
vim go.mod  # ‚ùå NO!

# Don't commit without go mod tidy
git add go.mod  # ‚ùå Run go mod tidy first!

# Don't use @master or @main in production
go get github.com/pkg/errors@master  # ‚ùå Use @latest or @v1.2.3
```

## Troubleshooting

### Problem: "package not found"
```bash
# Solution: Download dependencies
go mod download
go mod tidy
```

### Problem: "checksum mismatch"
```bash
# Solution: Clean module cache
go clean -modcache
go mod download
```

### Problem: "cannot find module"
```bash
# Solution: Verify module path
go mod init github.com/correct/path
go get package@latest
```

### Problem: "indirect dependency missing"
```bash
# Solution: Run tidy
go mod tidy
```

## Quick Reference Card

| Task | Command |
|------|---------|
| **New project** | `go mod init path` |
| **Add package** | `go get pkg@latest` |
| **Remove package** | Remove import + `go mod tidy` |
| **Update all** | `go get -u ./...` |
| **Update one** | `go get -u pkg@latest` |
| **Install deps** | `go mod download` |
| **Clean deps** | `go mod tidy` |
| **Build** | `go build .` |
| **Run** | `go run .` |
| **Test** | `go test ./...` |

## Comparison Summary

| Feature | uv | cargo | go |
|---------|-----|-------|-----|
| **Init project** | `uv init` | `cargo new` | `go mod init` |
| **Add dep** | `uv add pkg` | `cargo add pkg` | `go get pkg` |
| **Remove dep** | `uv remove pkg` | `cargo remove pkg` | `go mod tidy` |
| **Update** | `uv sync` | `cargo update` | `go get -u ./...` |
| **Build** | `uv run` | `cargo build` | `go build` |
| **Lockfile** | `uv.lock` | `Cargo.lock` | `go.sum` |
| **Config file** | `pyproject.toml` | `Cargo.toml` | `go.mod` |

## Remember

1. **Never edit go.mod manually** - Use `go get` instead
2. **Always run `go mod tidy`** - After adding/removing imports
3. **Commit go.sum** - It's like Cargo.lock, needed for reproducible builds
4. **Use @latest or @version** - Not @master or @main
5. **Keep it clean** - Run `go mod tidy` regularly

---

**The Golden Rule**: If you're tempted to edit `go.mod`, use `go get` instead! üöÄ
