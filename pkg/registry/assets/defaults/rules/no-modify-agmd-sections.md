---
name: no-modify-agmd-sections
category: agmd
description: Protect agmd-managed sections from modification
---

# Rule: Preserve agmd-Managed Sections

**IMPORTANT:** When working with `AGENTS.md` files managed by agmd:

## Understanding the Markers

The AGENTS.md file contains two types of sections, marked with HTML comments:

### Managed Section (Auto-Generated)
```markdown
<!-- agmd:managed-start -->
<!-- Auto-generated by agmd. Do not edit manually. -->

[Rules, workflows, and guidelines go here]

<!-- agmd:managed-end -->
```

### Custom Section (User-Editable)
```markdown
<!-- agmd:custom-start -->

## Your Custom Content

Add project-specific notes, instructions, or any custom content here.
This section is preserved when agmd regenerates AGENTS.md.

<!-- agmd:custom-end -->
```

## What You MAY Do

✅ **You CAN:**
- Edit, add, or remove anything between `<!-- agmd:custom-start -->` and `<!-- agmd:custom-end -->`
- Add sections, subsections, code blocks, lists, etc. in the custom section
- Add project-specific instructions, notes, or documentation
- Format the custom section however you like

## What You MUST NOT Do

❌ **You MUST NOT:**
- Modify content between `<!-- agmd:managed-start -->` and `<!-- agmd:managed-end -->`
- Remove or change the marker comments themselves (`<!-- agmd:... -->`)
- Add content outside of the marked sections

## Why This Matters

**Managed sections are auto-generated** by the `agmd` CLI tool from:
- Rules in `~/.agmd/rules/`
- Workflows in `~/.agmd/workflows/`
- Guidelines in `~/.agmd/guidelines/`
- Active items listed in `agents.toml`

Any manual changes to managed sections will be **overwritten** when:
- `agmd generate` is run
- `agmd add rule/workflow` is run (if auto-regenerate is enabled)
- Rules/workflows are updated in the registry

## How to Make Changes

### To Modify Rules/Workflows/Guidelines

Use the agmd CLI instead of editing AGENTS.md directly:

```bash
# Create a new rule
agmd new rule my-rule "Rule content"

# Add it to the project
agmd add rule my-rule

# This automatically regenerates AGENTS.md
```

### To Add Project-Specific Content

Edit the custom section in AGENTS.md directly:

```markdown
<!-- agmd:custom-start -->

## Project Setup

### Prerequisites
- Node.js 18+
- pnpm installed

### Environment Variables
- `DATABASE_URL` - PostgreSQL connection string
- `API_KEY` - Third-party API key

## Common Issues

### Build Fails
Check that all dependencies are installed: `pnpm install`

<!-- agmd:custom-end -->
```

## Example AGENTS.md Structure

```markdown
# Agent Instructions

<!-- agmd:managed-start -->
<!-- Auto-generated by agmd. Do not edit manually. -->

## Rules

### no-modify-agmd-sections
[This rule's content]

### typescript
[TypeScript rules]

## Workflows

### release
[Release workflow steps]

<!-- agmd:managed-end -->

<!-- agmd:custom-start -->

## Project-Specific Notes

Add your custom content here.

<!-- agmd:custom-end -->
```

---

**Remember:** Respect the markers, use the CLI for managed content, and you're free to customize the custom section!
